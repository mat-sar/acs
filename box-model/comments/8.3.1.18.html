<html lang="en"><head> <meta charset="utf-8"> <title> Margin collapse between distant boxes | Annotated CSS Spec </title> <meta name="description" content="Broaden your CSS knowledge by reading a specification enriched with explanations and examples."> <meta name="viewport" content="width=device-width,initial-scale=1"> <meta property="og:title" content="Annotated CSS Spec"> <meta property="og:url" content="https://annotatedcss.com"> <meta property="og:description" content="Broaden your CSS knowledge by reading an annotated specification!"> <meta property="og:image" content="/images/logo.png"> <meta property="og:type" content="website"> <meta property="og:image:width" content="300"> <meta property="og:image:height" content="300"> <link href="https://fonts.googleapis.com/css2?family=Inconsolata&amp;family=Open+Sans:ital,wght@0,400;0,600;1,300;1,400&amp;display=swap" rel="stylesheet"> <link rel="canonical" href="https://annotatedcss.com/box-model/comments/8.3.1.18-collapse-between-distant-boxes.html"> <link rel="stylesheet" href="/styles/main.css"> <link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="/images/favicon-96x96.png" sizes="96x96"> </head> <body> <header> <svg class="logo" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 41.01 41.01"><g class="marginBox" fill="none" stroke="#ececfb" stroke-width="2.646"><path d="M1.323 7.938V1.323h6.615M1.323 11.898v6.614M1.323 22.488v6.614M7.937 39.688H1.323v-6.615M39.688 7.938V1.323h-6.615M39.688 11.898v6.614M39.688 22.488v6.614M33.073 39.688h6.614v-6.615M11.906 1.318h6.615M22.49 1.318h6.614M11.906 39.688h6.615M22.49 39.688h6.614"></path></g><rect class="borderBox" ry="0" height="25.261" width="25.261" y="7.87" x="7.875" opacity=".99" fill="none" stroke="#ececfb" stroke-width="2.52" stroke-linecap="round"></rect><rect class="contentBox" ry="0" height="14.552" width="14.552" y="13.23" x="13.229" opacity=".99" fill="#c7a6e7ff"></rect></svg> <a class="title" href="/">Annotated CSS&nbsp;Spec </a><a class="help-link" href="/about">?</a> </header> <main> <article class="spec-comment open" data-comment-on="/box-model.html"> <div class="content"> <div class="comment-identifier"> This comment relates to the following words from Section&nbsp;8.3.1 of CSS&nbsp;2.2: <blockquote> Adjoining margins can be generated by elements that are not related as siblings or ancestors. </blockquote> </div> <p> This fragment of the spec relates directly to the preceding sentence: <q>A collapsed margin is considered adjoining to another margin if any of its component margins is adjoining to that margin.</q> This essentially means that margin collapse can take place between more than two margins at the same time. I discussed this in the <a href="/box-model/comments/8.3.1.17">previous comment</a>. </p> <p> The fragment we’re discussing here draws attention to the fact that the margins that participate in collapse can belong to elements that are not closely related. That is, to elements that are not in a ancestor-descendant relation or in a sibling relation. </p> <p>I’ll base the discussion on this example:</p> <pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  Parent 1
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>child1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Child 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>child2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Child 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  Parent 2
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre> <p> The two inner <code class="language-html">&lt;div&gt;</code> elements, Child&nbsp;1 and Child&nbsp;2, are related as neither siblings nor ancestors. Still, with the right CSS settings, we can cause margin collapse between the two boxes. </p> <p>Consider this styling:</p> <img src="/images/8.3.1.18-distant-boxes-without-margin-collapse.svg" alt="Two boxes, each of which contains a single child box. The top margin of the
      first box and the bottom margin of the second box collapse. Each parent box has
      a border, which prevents the children’s vertical margins from collapsing with
      the parents’ margins."> <p> As the diagram illustrates, the parents’ borders are the only barrier between the bottom margin of Child&nbsp;1, the collapsed inter⁠-⁠parent margin, and the top margin of Child&nbsp;2. </p> <p> If we remove the barriers, the bottom margin of Child&nbsp;1 and the top margin of Child&nbsp;2 will become part of the same collapsed margin. </p> <img src="/images/8.3.1.18-distant-boxes-with-margin-collapse.svg" alt="Two boxes, each of which contains a single child box. The first parent
      and its child both have a non-zero bottom margin of 20 px, and the second
      parent and its child both have a non-zero top margin of 20 px. These four
      margins collapse into a single margin of 20 px."> <p> You can check the effects yourself using the controls in the example below. </p> <div id="ex-8.3.1.18-i" class="example-visualization"> <style> #ex-8\.3\.1\.18-i .parent {
          background-color: #dfdff9;
          border: 1px solid #686892;
          line-height: 20px;
          margin: 20px;
          text-align: center;
        }

        #ex-8\.3\.1\.18-i .child {
          background-color: #705697;
          color: #f3eafb;
          height: 20px;
          line-height: 20px;
          margin-left: 20px;
          margin-right: 20px;
          text-align: center;
        }

        #ex-8\.3\.1\.18-i-child1 {
          margin-bottom: 20px;
        }

        #ex-8\.3\.1\.18-i-child2 {
          margin-top: 20px;
        }

        #ex-8\.3\.1\.18-i-remove-borders-1:checked
          ~ .example-frame
          #ex-8\.3\.1\.18-i-parent1 {
          border-bottom: none;
        }

        #ex-8\.3\.1\.18-i-remove-borders-2:checked
          ~ .example-frame
          #ex-8\.3\.1\.18-i-parent2 {
          border-top: none;
        } </style> <input type="checkbox" id="ex-8.3.1.18-i-remove-borders-1">&nbsp;<label for="ex-8.3.1.18-i-remove-borders-1">Remove bottom border from Parent&nbsp;1</label><br> <input type="checkbox" id="ex-8.3.1.18-i-remove-borders-2">&nbsp;<label for="ex-8.3.1.18-i-remove-borders-2">Remove bottom border from Parent&nbsp;2</label> <div class="example-frame"> <div id="ex-8.3.1.18-i-parent1" class="parent"> Parent 1 <div id="ex-8.3.1.18-i-child1" class="child">Child 1</div> </div> <div id="ex-8.3.1.18-i-parent2" class="parent"> <div id="ex-8.3.1.18-i-child2" class="child">Child 2</div> Parent 2 </div> </div> </div> </div> <div class="copyright-notice"> <p> <img alt="Creative Commons License" src="/images/CC_BY-SA_small.svg"> This work by <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName">Mateusz Sarnecki</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>. </p> </div> </article> </main> <script src="/scripts/main.js"></script> <!-- GoatCounter, privacy-sensitive web analytics --> <script data-goatcounter="https://msar.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script> </body></html>