<html lang="en"><head> <meta charset="utf-8"> <title> An exception to margin collapse when a box has non-zero minimum height | Annotated CSS Spec </title> <meta name="description" content="Broaden your CSS knowledge by reading a specification enriched with explanations and examples."> <meta name="viewport" content="width=device-width,initial-scale=1"> <meta name="robots" content="noindex"> <meta property="og:title" content="Annotated CSS Spec"> <meta property="og:url" content="https://annotatedcss.com"> <meta property="og:description" content="Broaden your CSS knowledge by reading an annotated specification!"> <meta property="og:image" content="/images/logo.png"> <meta property="og:type" content="website"> <meta property="og:image:width" content="300"> <meta property="og:image:height" content="300"> <link href="https://fonts.googleapis.com/css2?family=Inconsolata&amp;family=Open+Sans:ital,wght@0,400;0,600;1,300;1,400&amp;display=swap" rel="stylesheet"> <link rel="stylesheet" href="/styles/main.css"> <link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="/images/favicon-96x96.png" sizes="96x96"> </head> <body> <header> <svg class="logo" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 41.01 41.01"><g class="marginBox" fill="none" stroke="#ececfb" stroke-width="2.646"><path d="M1.323 7.938V1.323h6.615M1.323 11.898v6.614M1.323 22.488v6.614M7.937 39.688H1.323v-6.615M39.688 7.938V1.323h-6.615M39.688 11.898v6.614M39.688 22.488v6.614M33.073 39.688h6.614v-6.615M11.906 1.318h6.615M22.49 1.318h6.614M11.906 39.688h6.615M22.49 39.688h6.614"></path></g><rect class="borderBox" ry="0" height="25.261" width="25.261" y="7.87" x="7.875" opacity=".99" fill="none" stroke="#ececfb" stroke-width="2.52" stroke-linecap="round"></rect><rect class="contentBox" ry="0" height="14.552" width="14.552" y="13.23" x="13.229" opacity=".99" fill="#c7a6e7ff"></rect></svg> <a class="title" href="/">Annotated CSS&nbsp;Spec </a><a class="help-link" href="/about">?</a> </header> <main> <article class="spec-comment open" data-comment-on="/box-model.html"> <div class="content"> <div class="comment-identifier"> This comment relates to the following words from Section&nbsp;8.3.1 of CSS&nbsp;2.2: <blockquote> If the top margin of a box with non-zero computed 'min-height' and 'auto' computed 'height' collapses with the bottom margin of its last in-flow child, then the child's bottom margin does not collapse with the parent's bottom margin. </blockquote> </div> <p> If you haven’t already, I recommend that before reading this comment, you familiarize yourself with how margin collapse works in general by reading the rest of Section&nbsp;8.3.1. </p> <p> Note: at the time of writing, the latest draft of the CSS&nbsp;2.2 spec, <a href="https://drafts.csswg.org/css2/box.html#collapsing-margins">did not include this exception</a>. For this reason, be aware that browsers might not actually behave as specified by the fragment which is commented here. </p> <p> This fragment of the spec talks about a box whose top margin collapses with the <em>bottom</em> margin of its last in‑flow child. This is an example of a situation in which such collapse can take place: </p> <img src="/images/8.3.1.6-self-collapsing-box-within-self-collapsing-box.svg" alt="Diagram presenting a box contained within another box. Neither box
      has borders or paddings. The child box includes no content. The diagram
      visualizes the vertical margins of the two boxes."> <p> The child does not have any in⁠-⁠flow children, any padding, or any border. Otherwise, there would be a “barrier” between the top margin of the parent and the bottom margin of the child. This barrier would prevent margin collapse. For similar reasons, the parent box cannot have any top border or top padding. </p> <p> One more requirement which is not visible in the diagram is that neither the parent nor the child can establish a new block formatting context. If either of them did (e.g. via <code class="language-css">overflow: hidden</code>), margin collapse would be prevented. </p> <p> In the diagram, the top margin of the parent is not directly adjacent to the bottom margin of the child. There is another margin in⁠‑⁠between: it is the child’s top margin. However, the three margins will all collapse, and this still counts as the top margin of the parent collapsing with the bottom margin of the child. </p> <p> If we assume that the parent from the diagram has <code class="language-css">height: auto</code> and <code class="language-css">min-height: 0</code>, then these settings will lead to all four margins collapsing: </p> <img src="/images/8.3.1.6-collapsed-parent-and-child-margins.svg" alt="Diagram presenting a situation in which a parent box’s vertical margins
      have collapsed with the vertical margins of the only child box."> <p> The commented fragment of the spec tells us that if the parent has a non‑zero minimum height, say <code class="language-css">min-height: 10px</code>, then the bottom margin of the parent is prevented from collapsing with the bottom margin of the child. </p> <p> The result is illustrated in the diagram below, which assumes that the parent has a background colour, so that it can be identified more easily. </p> <img src="/images/8.3.1.6-margin-collapse-for-parent-with-min-height.svg" alt="Diagram presenting a parent box and its top and bottom margins.
      The top margin is labelled as a collapsed margin, which results from the
      box’s top margin collapsing with the top and bottom margins of its in-flow
      child. The bottom margin of the parent does not participate in the collapse
      because the parent has the 'height' property set to 'auto' and the 'min-height'
      property set to a non-zero value."> <p> This exception to margin collapse exists, so that the <code class="language-css">min-height</code> property remains effective in guaranteeing a minimum height for boxes. </p> </div> <div class="copyright-notice"> <p> <img alt="Creative Commons License" src="/images/CC_BY-SA_small.svg"> This work by <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName">Mateusz Sarnecki</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>. </p> </div> </article> </main> <script src="/scripts/main.js"></script> <!-- GoatCounter, privacy-sensitive web analytics --> <script data-goatcounter="https://msar.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script> </body></html>