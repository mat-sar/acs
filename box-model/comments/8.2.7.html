<html lang="en"><head> <meta charset="utf-8"> <title>Top-down width calculation | Annotated CSS Spec </title> <meta name="description" content="Broaden your CSS knowledge by reading a specification enriched with explanations and examples."> <meta name="viewport" content="width=device-width,initial-scale=1"> <meta name="robots" content="noindex"> <meta property="og:title" content="Annotated CSS Spec"> <meta property="og:url" content="https://annotatedcss.com"> <meta property="og:description" content="Broaden your CSS knowledge by reading an annotated specification!"> <meta property="og:image" content="/images/logo.png"> <meta property="og:type" content="website"> <meta property="og:image:width" content="300"> <meta property="og:image:height" content="300"> <link href="https://fonts.googleapis.com/css2?family=Inconsolata&amp;family=Open+Sans:ital,wght@0,400;0,600;1,300;1,400&amp;display=swap" rel="stylesheet"> <link rel="stylesheet" href="/styles/main.css"> <link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="/images/favicon-96x96.png" sizes="96x96"> </head> <body> <header> <svg class="logo" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 41.01 41.01"><g class="marginBox" fill="none" stroke="#ececfb" stroke-width="2.646"><path d="M1.323 7.938V1.323h6.615M1.323 11.898v6.614M1.323 22.488v6.614M7.937 39.688H1.323v-6.615M39.688 7.938V1.323h-6.615M39.688 11.898v6.614M39.688 22.488v6.614M33.073 39.688h6.614v-6.615M11.906 1.318h6.615M22.49 1.318h6.614M11.906 39.688h6.615M22.49 39.688h6.614"></path></g><rect class="borderBox" ry="0" height="25.261" width="25.261" y="7.87" x="7.875" opacity=".99" fill="none" stroke="#ececfb" stroke-width="2.52" stroke-linecap="round"></rect><rect class="contentBox" ry="0" height="14.552" width="14.552" y="13.23" x="13.229" opacity=".99" fill="#c7a6e7ff"></rect></svg> <a class="title" href="/">Annotated CSS&nbsp;Spec </a><a class="help-link" href="/about">?</a> </header> <main> <article class="spec-comment open" data-comment-on="/box-model.html"> <div class="content"> <div class="comment-identifier"> This comment relates to the following words from Section&nbsp;8.2 of CSS&nbsp;2.2: <blockquote> The <a href="https://www.w3.org/TR/CSS22/box.html#content-width">content width</a> for each LI box is calculated top-down; the <a href="https://www.w3.org/TR/CSS22/visuren.html#containing-block">containing block</a> for each LI box is established by the UL element. </blockquote> </div> <p> As Bert Bos – one of the co⁠-⁠authors of CSS – explains, the sentences in this bullet point are two different ways of saying the same thing: that <q cite="https://lists.w3.org/Archives/Public/www-style/2004Feb/0258.html">the widths are determined from the root element down to the inner most elements, via the containing block hierarchy</q>. (This quotation comes from <a href="https://lists.w3.org/Archives/Public/www-style/2004Feb/0258.html">a message posted to the CSS mailing list</a>.) </p> <p> To fully understand the quote, it’s necessary to know the concept of containing blocks. A containing block is a rectangular area with respect to which a box is usually sized and positioned. Let’s take this HTML as an example: </p> <pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>child<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre> <p> If we assume the default styling of <code class="language-html">&lt;div&gt;</code> elements, then the parent is the containing block of the child. Or, to be more precise, the containing block of the child is the parent’s content edge. That is, the browser uses the parent’s content edge as the starting point for calculating the child’s position and width. For example, if we set <code class="language-css">width: 50%</code> on the child, the percentage value will refer to the width of the parent’s content box. </p> <p> It is not always the case that the containing block of a box is its parent. It can be another ancestor, or the viewport. We won’t get into the specifics here. You can refer to <a href="https://www.w3.org/TR/CSS22/visudet.html#containing-block-details">Section&nbsp;10.1</a> for more information about containing blocks. </p> <p> Going back to the spec fragment, it states that in the example HTML, the <code class="language-html">&lt;ul&gt;</code> element serves as the containing block for the two <code class="language-html">&lt;li&gt;</code> elements. So, the browser will first calculate the width of the <code class="language-html">&lt;ul&gt;</code> box, and then use this information to calculate the width of the <code class="language-html">&lt;li&gt;</code> boxes. </p> <p> This is the general rule: width calculation flows from the top to the bottom in the document hierarchy. </p> </div> <div class="copyright-notice"> <p> <img alt="Creative Commons License" src="/images/CC_BY-SA_small.svg"> This work by <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName">Mateusz Sarnecki</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>. </p> </div> </article> </main> <script src="/scripts/main.js"></script> <!-- GoatCounter, privacy-sensitive web analytics --> <script data-goatcounter="https://msar.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script> </body></html>