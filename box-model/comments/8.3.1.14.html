<html lang="en"><head> <meta charset="utf-8"> <title>Collapse between sibling margins | Annotated CSS Spec </title> <meta name="description" content="Broaden your CSS knowledge by reading a specification enriched with explanations and examples."> <meta name="viewport" content="width=device-width,initial-scale=1"> <meta property="og:title" content="Annotated CSS Spec"> <meta property="og:url" content="https://annotatedcss.com"> <meta property="og:description" content="Broaden your CSS knowledge by reading an annotated specification!"> <meta property="og:image" content="/images/logo.png"> <meta property="og:type" content="website"> <meta property="og:image:width" content="300"> <meta property="og:image:height" content="300"> <link href="https://fonts.googleapis.com/css2?family=Inconsolata&amp;family=Open+Sans:ital,wght@0,400;0,600;1,300;1,400&amp;display=swap" rel="stylesheet"> <link rel="canonical" href="https://annotatedcss.com/box-model/comments/8.3.1.14_sibling_margin_collapse.html"> <link rel="stylesheet" href="/styles/main.css"> <link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="/images/favicon-96x96.png" sizes="96x96"> </head> <body> <header> <svg class="logo" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 41.01 41.01"><g class="marginBox" fill="none" stroke="#ececfb" stroke-width="2.646"><path d="M1.323 7.938V1.323h6.615M1.323 11.898v6.614M1.323 22.488v6.614M7.937 39.688H1.323v-6.615M39.688 7.938V1.323h-6.615M39.688 11.898v6.614M39.688 22.488v6.614M33.073 39.688h6.614v-6.615M11.906 1.318h6.615M22.49 1.318h6.614M11.906 39.688h6.615M22.49 39.688h6.614"></path></g><rect class="borderBox" ry="0" height="25.261" width="25.261" y="7.87" x="7.875" opacity=".99" fill="none" stroke="#ececfb" stroke-width="2.52" stroke-linecap="round"></rect><rect class="contentBox" ry="0" height="14.552" width="14.552" y="13.23" x="13.229" opacity=".99" fill="#c7a6e7ff"></rect></svg> <a class="title" href="/">Annotated CSS&nbsp;Spec </a><a class="help-link" href="/about">?</a> </header> <main> <article class="spec-comment open" data-comment-on="/box-model.html"> <div class="content"> <div class="comment-identifier"> This comment relates to the following words from Section&nbsp;8.1 of CSS&nbsp;2.2: <blockquote> bottom margin of box and top margin of its next in-flow following sibling </blockquote> </div> <p>Let’s consider this snippet:</p> <pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>in-flow-sibling<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Box 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>in-flow-sibling<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Box 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre> <p> We’ll apply a 20⁠-⁠px margin to both children boxes. In addition, we’ll set a border on the parent, to ensure that its margins do not collapse with the margins of the children. </p> <p>This is the result:</p> <div id="ex-8.3.1.14-i" class="example-visualization"> <style> #ex-8\.3\.1\.14-i .parent {
          background-color: #dfdff9;
          border: solid 1px #686892;
        }

        #ex-8\.3\.1\.14-i .in-flow-sibling {
          background-color: #705697;
          color: #f3eafb;
          margin: 20px;
        } </style> <div class="example-frame"> <div class="parent"> <div class="in-flow-sibling">Box 1</div> <div class="in-flow-sibling">Box 2</div> </div> </div> </div> <p> The space above Box&nbsp;1 (which is due to its top margin) and the space below Box&nbsp;2 (due to its bottom margin) is the same as the space between these two boxes. This is a consequence of the siblings’ margins collapsing. </p> <p> Note that the spec says that the sibling boxes involved in collapse both need to be in flow. This means that if we applied absolute positioning to any of the siblings, or turned it into a float, the bottom margin of Box&nbsp;1 and the top margin of Box&nbsp;2 would not be adjoining. </p> <p> If we wanted to keep both Box&nbsp;1 and Box&nbsp;2 in flow, but prevent their margins from collapsing, it’s not that easy to do in CSS&nbsp;2.x. There is no setting we could apply to any of the siblings, or any other box, which would ensure that no collapse takes place. </p> <p> One solution, not the most elegant, is to introduce an extra box between the two siblings, a “collapse blocker”. This box would have no content and would be invisible. It would only include some unobtrusive <a href="/box-model/comments/8.3.1.10">collapse barrier</a>, e.g. extremely narrow padding, e.g. 0.01&nbsp;px. </p> <div id="ex-8.3.1.14-ii" class="example-visualization"> <style> #ex-8\.3\.1\.14-ii .parent {
          background-color: #dfdff9;
          border: solid 1px #686892;
        }

        #ex-8\.3\.1\.14-ii .in-flow-sibling {
          background-color: #705697;
          color: #f3eafb;
          margin: 20px;
        }

        #ex-8\.3\.1\.14-ii .collapse-blocker {
          display: none;
        }

        #ex-8\.3\.1\.14-ii-use-blocker:checked
          ~ .example-frame
          .collapse-blocker {
          /* Assigning 0.01px to two parameters, to be on the safe side. */
          border: 0;
          display: block;
          height: 0.01px;
          margin: 0;
          padding: 0;
          padding-top: 0.01px;
          width: 0;
        } </style> <input type="checkbox" id="ex-8.3.1.14-ii-use-blocker" checked=""><label for="ex-8.3.1.14-ii-use-blocker">Use margin collapse blocker</label> <div class="example-frame"> <div class="parent"> <div class="in-flow-sibling">Box 1</div> <div class="collapse-blocker"></div> <div class="in-flow-sibling">Box 2</div> </div> </div> </div> <p> If we go outside the CSS&nbsp;2.2 spec, one way to prevent the collapse is to use the <a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Flexbox">flexbox</a>. There is a lot to the topic (<a href="https://www.w3.org/TR/css-flexbox-1/">a separate specification</a>, actually), so here let me only say that if we changed the parent into a flexbox, then the margins of Box&nbsp;1 and Box&nbsp;2 would never collapse. </p> </div> <div class="copyright-notice"> <p> <img alt="Creative Commons License" src="/images/CC_BY-SA_small.svg"> This work by <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName">Mateusz Sarnecki</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>. </p> </div> </article> </main> <script src="/scripts/main.js"></script> <!-- GoatCounter, privacy-sensitive web analytics --> <script data-goatcounter="https://msar.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script> </body></html>