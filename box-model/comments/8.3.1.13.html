<html lang="en"><head> <meta charset="utf-8"> <title>Collapse between top margins | Annotated CSS Spec </title> <meta name="description" content="Broaden your CSS knowledge by reading a specification enriched with explanations and examples."> <meta name="viewport" content="width=device-width,initial-scale=1"> <meta property="og:title" content="Annotated CSS Spec"> <meta property="og:url" content="https://annotatedcss.com"> <meta property="og:description" content="Broaden your CSS knowledge by reading an annotated specification!"> <meta property="og:image" content="/images/logo.png"> <meta property="og:type" content="website"> <meta property="og:image:width" content="300"> <meta property="og:image:height" content="300"> <link href="https://fonts.googleapis.com/css2?family=Inconsolata&amp;family=Open+Sans:ital,wght@0,400;0,600;1,300;1,400&amp;display=swap" rel="stylesheet"> <link rel="canonical" href="https://annotatedcss.com/box-model/comments/8.3.1.13-top-parent-top-child-margin-collapse.html"> <link rel="stylesheet" href="/styles/main.css"> <link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="/images/favicon-96x96.png" sizes="96x96"> </head> <body> <header> <svg class="logo" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 41.01 41.01"><g class="marginBox" fill="none" stroke="#ececfb" stroke-width="2.646"><path d="M1.323 7.938V1.323h6.615M1.323 11.898v6.614M1.323 22.488v6.614M7.937 39.688H1.323v-6.615M39.688 7.938V1.323h-6.615M39.688 11.898v6.614M39.688 22.488v6.614M33.073 39.688h6.614v-6.615M11.906 1.318h6.615M22.49 1.318h6.614M11.906 39.688h6.615M22.49 39.688h6.614"></path></g><rect class="borderBox" ry="0" height="25.261" width="25.261" y="7.87" x="7.875" opacity=".99" fill="none" stroke="#ececfb" stroke-width="2.52" stroke-linecap="round"></rect><rect class="contentBox" ry="0" height="14.552" width="14.552" y="13.23" x="13.229" opacity=".99" fill="#c7a6e7ff"></rect></svg> <a class="title" href="/">Annotated CSS&nbsp;Spec </a><a class="help-link" href="/about">?</a> </header> <main> <article class="spec-comment open" data-comment-on="/box-model.html"> <div class="content"> <div class="comment-identifier"> This comment relates to the following words from Section&nbsp;8.3.1 of CSS&nbsp;2.2: <blockquote> top margin of a box and top margin of its first in-flow child </blockquote> </div> <p>Let’s take a simple parent⁠-⁠child example:</p> <pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>child<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre> <p> We’ll assign <code class="language-css">margin-top: 25px</code> to both of the boxes, and add some additional styling such as background colours. </p> <p> As a result, the top margin of the parent collapses with the top margin of the child. This collapse is apparent in the fact that the top outer edges of the two boxes are aligned: </p> <div id="ex-8.3.1.13-i" class="example-visualization"> <style> #ex-8\.3\.1\.13-i .parent {
          background-color: #dfdff9;
          height: 100px;
          margin-top: 25px;
        }

        #ex-8\.3\.1\.13-i .child {
          background-color: #705697;
          height: 50px;
          margin-top: 25px;
          width: 50px;
        } </style> <div class="example-frame"> <div class="parent"> <div class="child"></div> </div> </div> </div> <p> The margins collapse because they are adjoining, as defined by the spec. It would have been enough to add something like a non⁠-⁠zero top border to the parent to prevent the collapse: </p> <div id="ex-8.3.1.13-ii" class="example-visualization"> <style> #ex-8\.3\.1\.13-ii .parent {
          background-color: #dfdff9;
          border-top: 1px solid #686892;
          height: 100px;
          margin-top: 25px;
        }

        #ex-8\.3\.1\.13-ii .child {
          background-color: #705697;
          height: 50px;
          margin-top: 25px;
          width: 50px;
        } </style> <div class="example-frame"> <div class="parent"> <div class="child"></div> </div> </div> </div> <p> Note that the commented fragment talks about collapse taking place between the top margin of a parent and the top margin of its first child <em>that is in flow</em>. An element’s first in⁠-⁠flow child is not necessarily its first child in general. Let’s see an example: </p> <pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>child out-of-flow<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Box 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>child<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Box 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre> <p> The stylesheet will be largely the same as in the previous example: it will declare a background colour, a height, and a top margin on all boxes. An important difference is that Box&nbsp;1 will be a floated via <code class="language-css">float: right</code>. </p> <p> The styling ensures that Box&nbsp;2 is the first in⁠-⁠flow child. The floated Box&nbsp;1 is out of flow, in accordance with <a href="https://www.w3.org/TR/CSS22/visuren.html#positioning-scheme">Section&nbsp;9.3</a>: <q>An element is called <dfn>out of flow</dfn> if it is floated, absolutely positioned, or is the root element.</q> </p> <p> Thus, we expect the top margin of the parent to collapse with the top margin of Box&nbsp;2, and this is indeed the case: </p> <div id="ex-8.3.1.13-iii" class="example-visualization"> <style> #ex-8\.3\.1\.13-iii .parent {
          background-color: #dfdff9;
          height: 125px;
          margin-top: 25px;
        }

        #ex-8\.3\.1\.13-iii .child {
          background-color: #705697;
          color: #f3eafb;
          height: 50px;
          margin-top: 25px;
          width: 50px;
        }

        #ex-8\.3\.1\.13-iii .child.not-in-flow {
          float: right;
        } </style> <div class="example-frame"> <div class="parent"> <div class="child not-in-flow">Box 1</div> <div class="child in-flow">Box 2</div> </div> </div> </div> <p> There is no collapse between the top margins of the float and the parent. Generally, it follows from the definition of margin collapse that the margins of an out⁠-⁠of⁠-⁠flow box are never considered adjoining to the margins of any other box. </p> </div> <div class="copyright-notice"> <p> <img alt="Creative Commons License" src="/images/CC_BY-SA_small.svg"> This work by <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName">Mateusz Sarnecki</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>. </p> </div> </article> </main> <script src="/scripts/main.js"></script> <!-- GoatCounter, privacy-sensitive web analytics --> <script data-goatcounter="https://msar.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script> </body></html>