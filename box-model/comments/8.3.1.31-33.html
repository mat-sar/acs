<html lang="en"><head> <meta charset="utf-8"> <title> Rules for calculating the width of a collapsed margin | Annotated CSS Spec </title> <meta name="description" content="Broaden your CSS knowledge by reading a specification enriched with explanations and examples."> <meta name="viewport" content="width=device-width,initial-scale=1"> <meta property="og:title" content="Annotated CSS Spec"> <meta property="og:url" content="https://annotatedcss.com"> <meta property="og:description" content="Broaden your CSS knowledge by reading an annotated specification!"> <meta property="og:image" content="/images/logo.png"> <meta property="og:type" content="website"> <meta property="og:image:width" content="300"> <meta property="og:image:height" content="300"> <link href="https://fonts.googleapis.com/css2?family=Inconsolata&amp;family=Open+Sans:ital,wght@0,400;0,600;1,300;1,400&amp;display=swap" rel="stylesheet"> <link rel="canonical" href="https://annotatedcss.com/box-model/comments/8.3.1.31-33_rules_for_calculating_collapsed_margin.html"> <link rel="stylesheet" href="/styles/main.css"> <link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="/images/favicon-96x96.png" sizes="96x96"> </head> <body> <header> <svg class="logo" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 41.01 41.01"><g class="marginBox" fill="none" stroke="#ececfb" stroke-width="2.646"><path d="M1.323 7.938V1.323h6.615M1.323 11.898v6.614M1.323 22.488v6.614M7.937 39.688H1.323v-6.615M39.688 7.938V1.323h-6.615M39.688 11.898v6.614M39.688 22.488v6.614M33.073 39.688h6.614v-6.615M11.906 1.318h6.615M22.49 1.318h6.614M11.906 39.688h6.615M22.49 39.688h6.614"></path></g><rect class="borderBox" ry="0" height="25.261" width="25.261" y="7.87" x="7.875" opacity=".99" fill="none" stroke="#ececfb" stroke-width="2.52" stroke-linecap="round"></rect><rect class="contentBox" ry="0" height="14.552" width="14.552" y="13.23" x="13.229" opacity=".99" fill="#c7a6e7ff"></rect></svg> <a class="title" href="/">Annotated CSS&nbsp;Spec </a><a class="help-link" href="/about">?</a> </header> <main> <article class="spec-comment open" data-comment-on="/box-model.html"> <div class="content"> <div class="comment-identifier"> <p> This comment relates to the following words from Section&nbsp;8.3.1 of CSS&nbsp;2.2: </p> <blockquote> When two or more margins collapse, the resulting margin width is the maximum of the collapsing margins' widths. In the case of negative margins, the maximum of the absolute values of the negative adjoining margins is deducted from the maximum of the positive adjoining margins. If there are no positive margins, the maximum of the absolute values of the adjoining margins is deducted from zero. </blockquote> </div> <p> This fragment spells out the rules for determining the size of the collapsed margin. </p> <p> The calculation depends on whether the margins participating in the collapse have a positive width, a negative width, or both. There are three cases: </p> <ul> <li>all margins are positive</li> <li>all margins are negative</li> <li> at least one margin is positive and at least one margin is negative </li> </ul> <p> When all collapsing margins are positive, the biggest width wins. That is, the collapsed margin will be the same size as the biggest collapsing margin. Say we have margins with the widths 10&nbsp;px, 2&nbsp;px, 30&nbsp;px. The collapsed margin will be 30&nbsp;px in width. </p> <p> When all collapsing margins are negative, the smallest width wins. To be more precise, the width of the collapsed margin will be equal to the width of the margin with the most negative value. Given margins with the widths −5&nbsp;px, −5&nbsp;px, −7.5&nbsp;px, the collapsed margin will be −7.5&nbsp;px. </p> <p> When there is a mix of positive and negative margins, there is a little arithmetic exercise :) The width of the smallest margin and the width of the biggest margin are added together. Let’s take margins with these widths: −5&nbsp;px, −10&nbsp;px, 10&nbsp;px, 2&nbsp;px. The collapsed margin will be 0 in width. This is because −10&nbsp;px + 10&nbsp;px = 0&nbsp;px; </p> <p> These rules for width calculation reveal an important characteristic of margin collapse. When there are three or more adjoining margins, they all collapse simultaneously, not in steps. </p> <p> Let’s return to the last example: A:&nbsp;−5&nbsp;px, B:&nbsp;−10&nbsp;px, C:&nbsp;10&nbsp;px, D:&nbsp;2&nbsp;px. If margin collapse was a stepwise process, the browser could first collapse A and B. The collapsed margin, call it X, would be −10&nbsp;px. The browser could then collapse margin&nbsp;X with C. The resulting collapsed margin, Y, would be 0. Finally, the browser would collapse Y and&nbsp;D. The result would be a margin with a width of 2&nbsp;px. </p> <p> This is an incorrect result. When collapsing margins, the browser considers all of them at the same time. The correct result, as we previously saw, is 0. </p> </div> <div class="copyright-notice"> <p> <img alt="Creative Commons License" src="/images/CC_BY-SA_small.svg"> This work by <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName">Mateusz Sarnecki</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>. </p> </div> </article> </main> <script src="/scripts/main.js"></script> <!-- GoatCounter, privacy-sensitive web analytics --> <script data-goatcounter="https://msar.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script> </body></html>