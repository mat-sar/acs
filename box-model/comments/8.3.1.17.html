<html lang="en"><head> <meta charset="utf-8"> <title> Collapse between multiple margins | Annotated CSS Spec </title> <meta name="description" content="Broaden your CSS knowledge by reading a specification enriched with explanations and examples."> <meta name="viewport" content="width=device-width,initial-scale=1"> <meta property="og:title" content="Annotated CSS Spec"> <meta property="og:url" content="https://annotatedcss.com"> <meta property="og:description" content="Broaden your CSS knowledge by reading an annotated specification!"> <meta property="og:image" content="/images/logo.png"> <meta property="og:type" content="website"> <meta property="og:image:width" content="300"> <meta property="og:image:height" content="300"> <link href="https://fonts.googleapis.com/css2?family=Inconsolata&amp;family=Open+Sans:ital,wght@0,400;0,600;1,300;1,400&amp;display=swap" rel="stylesheet"> <link rel="canonical" href="https://annotatedcss.com/box-model/comments/8.3.1.17"> <link rel="stylesheet" href="/styles/main.css"> <link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="/images/favicon-96x96.png" sizes="96x96"> </head> <body> <header> <svg class="logo" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 41.01 41.01"><g class="marginBox" fill="none" stroke="#ececfb" stroke-width="2.646"><path d="M1.323 7.938V1.323h6.615M1.323 11.898v6.614M1.323 22.488v6.614M7.937 39.688H1.323v-6.615M39.688 7.938V1.323h-6.615M39.688 11.898v6.614M39.688 22.488v6.614M33.073 39.688h6.614v-6.615M11.906 1.318h6.615M22.49 1.318h6.614M11.906 39.688h6.615M22.49 39.688h6.614"></path></g><rect class="borderBox" ry="0" height="25.261" width="25.261" y="7.87" x="7.875" opacity=".99" fill="none" stroke="#ececfb" stroke-width="2.52" stroke-linecap="round"></rect><rect class="contentBox" ry="0" height="14.552" width="14.552" y="13.23" x="13.229" opacity=".99" fill="#c7a6e7ff"></rect></svg> <a class="title" href="/">Annotated CSS&nbsp;Spec </a><a class="help-link" href="/about">?</a> </header> <main> <article class="spec-comment open" data-comment-on="/box-model.html"> <div class="content"> <div class="comment-identifier"> This comment relates to the following words from Section&nbsp;8.3.1 of CSS&nbsp;2.2: <blockquote> A collapsed margin is considered adjoining to another margin if any of its component margins is adjoining to that margin. </blockquote> </div> <p> This sentence of the spec can be, I would say, a little misleading. I’ll explain why, but first, let me discuss what I think the intent of the fragment is. </p> <p> In essence, this sentence states that margin collapse can happen between more than two margins. </p> <p>Let’s imagine a group of nested boxes:</p> <img src="/images/8.3.1.17-nested-boxes_without_collapse.svg" alt="Three nested boxes: outermost, middle, and innermost. Each box has
      a border and a non-zero top margin. The outermost box’s top margin is called
      Margin A, the middle box’s top margin is called Margin B, and the innermost
      box’s top margin is called Margin C."> <p> In the diagram, the boxes have borders. The presence of the borders prevents margins collapse. Let’s assume that these borders are the only barrier to margin collapse. </p> <p> So, if we remove the borders, Margin&nbsp;A will now be adjoining to Margin&nbsp;B, which, in turn, will be adjoining to Margin&nbsp;C. These three margins will collapse into a single margin. </p> <img src="/images/8.3.1.17-nested-boxes_with_collapse.svg" alt="Three nested boxes: outermost, middle, and innermost. Each box has
      a non-zero top margin. The margins collapse, with the result that the
      three boxes are aligned at the top."> <p> I think the sentence from the spec can be misleading for two reasons. The way it is formulated, it might suggest that if there are multiple adjoining margins, they are collapsed step by step, e.g.&nbsp;first Margin&nbsp;A collapses with Margin&nbsp;B, then the collapsed margin AB collapses with Margin&nbsp;C etc. </p> <p> This is not what happens. When margins collapse, they collapse all at the same time. There are no intermediate stages. I talk more about this in <a href="/box-model/comments/8.3.1.31-33">another comment</a>. </p> <p> The second problematic aspect of the quoted sentence is its use of the expression <i>component margin</i>. I can imagine a reader of the spec interpreting <i>component margin</i> as meaning “a margin that is a part of a collapsed margin”. Collapsed margins don’t have parts. They are single margins without any internal structure. </p> <p> If margin collapse was somehow about adding margins together, you could expect the result of collapse in our example to be like this: </p> <img src="/images/8.3.1.17-nested-boxes_with_collapse_incorrect_assumption.svg" alt="Three nested boxes: outermost, middle, and innermost. Each box has a top margin.
      The margins overlap."> <p> However, this is not what happens. The single collapsed margin is shared by all the boxes in the example. This why the top content edge of the outermost box is aligned with the top content edge of the inner most box. </p> <p> It is not that <i>component margin</i> is a bad term. However, it has to be properly understood, like “one of the margins that have been replaced by the collapsed margin”. </p> <p> My thinking about this fragment of the spec has been largely influenced by <a href="https://lists.w3.org/Archives/Public/www-style/2012Mar/0057.html">Anton Prowse’s great remarks</a>. </p> </div> <div class="copyright-notice"> <p> <img alt="Creative Commons License" src="/images/CC_BY-SA_small.svg"> This work by <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName">Mateusz Sarnecki</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>. </p> </div> </article> </main> <script src="/scripts/main.js"></script> <!-- GoatCounter, privacy-sensitive web analytics --> <script data-goatcounter="https://msar.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script> </body></html>